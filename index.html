<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator App</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>


    <div id="calculator-app">
        <div class="visor"></div>
        <div class="buttons">
            <button class="btn-other">C</button>
            <button class="btn-other">+/-</button>
            <button class="btn-other">%</button>
            <button class="btn-operation">รท</button>
            <button>7</button>
            <button>8</button>
            <button>9</button>
            <button class="btn-operation">X</button>
            <button>4</button>
            <button>5</button>
            <button>6</button>
            <button class="btn-operation">-</button>
            <button>1</button>
            <button>2</button>
            <button>3</button>
            <button class="btn-operation">+</button>
            <button id="zero">0</button>
            <button>.</button>
            <button class="btn-operation">=</button>
        </div>
    </div>

    <script>

        function formatarNumero(numero) {
            if (isNaN(numero)) {
                return '';
            }

            numero = parseFloat(numero);

            return numero.toLocaleString('pt-BR', {
                // minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }

        const validarEntrada = entrada => {
            let teclasPermitidas = ["+", "-", "*", "X", "+", "C", "+/-", "%", "รท", ".", "0"];
            return (+entrada > 0 || teclasPermitidas.includes(entrada));
        }

        let buttons = document.querySelectorAll('button');

        let display = document.querySelector('.visor');

        const atualizaDisplay = tecla => {
            if (tecla === "C") {
                display.innerHTML = '';
                return;
            }

            if (tecla === '.' && display.innerHTML.indexOf(".") >= 0) {
                return;
            }

            if (tecla === '.' && display.innerHTML === "") {
                display.innerHTML = '0'+ tecla;
                return;
            }

            if (+tecla > 0 || tecla === "0" || tecla === ".")
                display.innerHTML = display.innerHTML +''+ tecla;
        }

        buttons.forEach(function(button){

            button.addEventListener('click', function(e) {
                let tecla = e.target.textContent;

                if (validarEntrada(tecla)) {
                    atualizaDisplay(tecla);
                }
            });

        })

        document.addEventListener('keypress', function(e){
            let tecla = e.key;

            if (validarEntrada(tecla)) {
                atualizaDisplay(tecla);
            }
        });
    </script>

</body>
</html>